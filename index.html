<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Fluid, by gameLab â€” ported by Rezmason</title>
		<meta
			name="viewport"
			content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
		/>
		<style type="text/css">
			html,
			body {
				margin: 0;
				overscroll-behavior: none;
				height: 100%;
			}

			body {
				background: black;
				color: white;
				overflow: hidden;

				display: flex;
				justify-content: center;
				align-items: center;
			}
		</style>
	</head>
	<body>
		<game id="fluid">
			<style type="text/css">
				game#fluid {
					position: relative;
					--aspect-ratio: calc(4 / 3);
					height: calc(min(100vh, 100vw / var(--aspect-ratio)) - 4em);
					aspect-ratio: var(--aspect-ratio);
					border-radius: 1vmin;
					overflow: hidden;
					cursor: pointer;
					user-select: none;
					-webkit-user-select: none;
				}

				game#fluid #scene {
					background: white;
					overflow: hidden;
				}

				game#fluid #metaballs {
					pointer-events: none;
				}

				game#fluid #scene,
				game#fluid #metaballs,
				game#fluid #splash {
					position: absolute;
					width: 100%;
					height: 100%;
				}

				@keyframes fade-away {
					from {
						opacity: 1;
					}
					to {
						opacity: 0;
					}
				}

				game#fluid img#splash {
					animation: fade-away 2s cubic-bezier(0.11, 0, 0.5, 0) forwards 3s;
					user-select: none;
					pointer-events: none;
				}

				instruments {
					/*
					position: absolute;
					top: 0;
					right: 0;
					*/
					background: #222;
					border: solid #222;
					border-width: 2em 0 2em 5em;
					border-radius: 0.5em;
					height: 80vh;
					overflow-y: scroll;
					display: flex;
					flex-direction: column;
					align-items: start;
					justify-content: stretch;
					flex-shrink: 0;
					gap: 0;
					margin: 1em;
				}

				instruments p {
					flex-shrink: 0;
					flex-grow: 1;
					display: flex;
					align-items: center;
					justify-content: end;
					background: white;
					color: black;
					width: 2in;
					height: 2rem;
					border: 0.2rem solid #aaa;
					font-size: 0.8rem;
					font-family: monospace;
					font-weight: bold;
					margin: -0.1rem 0 -0.1rem 0;
					padding: 0;
					padding-right: 1em;
					cursor: pointer;
					user-select: none;
					--pressed-background: lightgray;
					--pressed-color: black;
					--hover-color: gray;

					white-space: nowrap;
					text-overflow: clip;
				}

				instruments p:nth-child(12n + 2),
				instruments p:nth-child(12n + 4),
				instruments p:nth-child(12n + 6),
				instruments p:nth-child(12n + 9),
				instruments p:nth-child(12n + 11) {
					width: 1.25in;
					background: #444;
					font-size: 0.5rem;
					border: 0.3rem solid black;
					--pressed-background: black;
					--pressed-color: white;
					--hover-color: white;
					color: lightgray;
					z-index: 2;
					height: 1rem;
					margin: -0.75rem 0 -0.75rem 0;
				}

				instruments p:hover {
					color: var(--hover-color);
				}

				instruments p:active {
					background: var(--pressed-background);
					color: var(--pressed-color);
				}
			</style>
			<svg id="scene" viewBox="-512 -384 1024 768"></svg>
			<canvas id="metaballs" width="1024" height="768"></canvas>
			<img id="splash" src="assets/svg/splash.svg" />
			<!-- <script src="lib/gl-matrix.js"></script> -->
			<script src="lib/gl-matrix-min.js"></script>
			<script type="module" src="js/game.js"></script>
		</game>
		<instruments></instruments>
	</body>
</html>
